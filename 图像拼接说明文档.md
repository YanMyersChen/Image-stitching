
# å›¾åƒæ‹¼æ¥ä¸è¡¥å…¨è¿‡ç¨‹æ¼”ç¤ºç³»ç»Ÿè¯´æ˜æ–‡æ¡£

## é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®ä¸ºä¸€æ¬¾åŸºäº Streamlit æ„å»ºçš„äº¤äº’å¼å›¾åƒç¼–è¾‘ Web åº”ç”¨ï¼Œç”¨æˆ·å¯ä¸Šä¼ ä»»æ„ä¸¤å¼ å›¾åƒï¼Œé€šè¿‡ç‰¹å¾åŒ¹é…å®ç°å›¾åƒè‡ªåŠ¨æ‹¼æ¥ï¼Œå¹¶å¯¹æ‹¼æ¥è¿‡ç¨‹ä¸­å‡ºç°çš„ç©ºæ´åŒºåŸŸè¿›è¡Œå›¾åƒè¡¥å…¨ï¼ˆinpaintingï¼‰å¤„ç†ã€‚

é¡¹ç›®æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š

- å›¾åƒä¸Šä¼ ä¸é¢„è§ˆ
- ç‰¹å¾ç‚¹æå–ä¸åŒ¹é…ï¼ˆæ”¯æŒ ORB / SIFTï¼‰
- å›¾åƒæ‹¼æ¥ï¼ˆåŸºäºå•åº”æ€§çŸ©é˜µï¼‰
- ç©ºæ´åŒºåŸŸè‡ªåŠ¨ä¿®å¤
- æ‹¼æ¥å›¾åƒä¸ä¿®å¤å›¾åƒå¹¶åˆ—å±•ç¤ºä¸ä¸‹è½½
- è‡ªå®šä¹‰èƒŒæ™¯ç•Œé¢ä¸è§†è§‰äº¤äº’ä¼˜åŒ–

---

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ app.py                # ä¸»ç•Œé¢ç¨‹åºï¼ˆStreamlit Web ç«¯ï¼‰
â”œâ”€â”€ main.py               # å‘½ä»¤è¡Œæ‰¹å¤„ç†å…¥å£ï¼Œç”¨äºç¦»çº¿æ‹¼æ¥æ¼”ç¤º
â”œâ”€â”€ feature_matcher.py    # ç‰¹å¾æå–ä¸åŒ¹é…å°è£…
â”œâ”€â”€ image_stitcher.py     # å›¾åƒæ‹¼æ¥æ¨¡å—ï¼ˆå¤–éƒ¨æä¾›ï¼‰
â”œâ”€â”€ inpainting.py         # å›¾åƒä¿®å¤æ¨¡å—ï¼ˆå¤–éƒ¨æä¾›ï¼‰
â”œâ”€â”€ Background/           # èƒŒæ™¯å›¾åƒèµ„æºæ–‡ä»¶å¤¹
â”œâ”€â”€ Image/                # é»˜è®¤æµ‹è¯•å›¾åƒ
â””â”€â”€ utils.py              # è¾…åŠ©å‡½æ•°å¦‚åŠ æ ‡é¢˜ç­‰
```

---

## æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### 1. å›¾åƒä¸Šä¼ ä¸é¢„è§ˆ

ç”¨æˆ·é€šè¿‡ç•Œé¢ä¸Šä¼ ä¸¤å¼  JPG/PNG å›¾åƒï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ˜¾ç¤ºå›¾åƒé¢„è§ˆï¼Œæ”¯æŒè°ƒæ•´é¢„è§ˆå®½åº¦ã€‚

### 2. ç‰¹å¾æå–ä¸åŒ¹é…ï¼ˆ`feature_matcher.py`ï¼‰

æ”¯æŒ SIFT å’Œ ORB ä¸¤ç§å¸¸ç”¨å›¾åƒç‰¹å¾æ–¹æ³•ï¼š

- `extract_features(img, method='SIFT')`: æå–å…³é”®ç‚¹ä¸æè¿°ç¬¦
- `match_features(desc1, desc2, method='SIFT')`: åŸºäº KNN + æ¯”ç‡æµ‹è¯•è¿›è¡Œç‰¹å¾åŒ¹é…

> é»˜è®¤ä½¿ç”¨ `cv2.BFMatcher`ï¼ŒORB ä½¿ç”¨ Hamming è·ç¦»ï¼ŒSIFT ä½¿ç”¨ L2 è·ç¦»ã€‚

### 3. å›¾åƒæ‹¼æ¥ï¼ˆ`stitch_images`ï¼‰

- é€šè¿‡ç‰¹å¾ç‚¹è®¡ç®—å›¾åƒé—´å•åº”æ€§çŸ©é˜µ
- ä½¿ç”¨ `cv2.warpPerspective` å°†ä¸€å¼ å›¾æ˜ å°„åˆ°å¦ä¸€å¼ å›¾çš„åæ ‡ç©ºé—´
- ä½¿ç”¨éé›¶æ©è†œåˆæˆè¾“å‡ºå›¾åƒ

### 4. ç©ºæ´ä¿®å¤ï¼ˆ`apply_inpainting`ï¼‰

- é’ˆå¯¹æ‹¼æ¥ç»“æœä¸­é€æ˜/é»‘è‰²åŒºåŸŸè¿›è¡ŒåŸºäº OpenCV çš„ä¿®å¤ï¼ˆå¦‚ `cv2.inpaint()`ï¼‰

---

## ç”¨æˆ·ç•Œé¢äº®ç‚¹ï¼ˆ`app.py`ï¼‰

- èƒŒæ™¯å›¾æ”¯æŒè‡ªå®šä¹‰ï¼šé€šè¿‡ `get_base64_bg()` å‡½æ•°è¯»å–æœ¬åœ°å›¾åƒä½œä¸ºèƒŒæ™¯
- ï¸å¹¶åˆ—æ˜¾ç¤ºæ‹¼æ¥ç»“æœä¸ä¿®å¤å›¾
- æ”¯æŒé€‰æ‹©ç®—æ³•ä¸å‘½åä»»åŠ¡
- æ”¯æŒä¸‹è½½æœ€ç»ˆå›¾åƒç»“æœ
- å®æ—¶äº¤äº’ï¼Œæ— éœ€é‡å¯æˆ–å‘½ä»¤è¡Œæ“ä½œ

---

## ç¤ºä¾‹è¿è¡Œæ•ˆæœï¼ˆWeb æ¨¡å¼ï¼‰

1. å¯åŠ¨ç•Œé¢ï¼š

   ```bash
   streamlit run app.py
   ```

2. ä¸Šä¼ å›¾åƒ â†’ é€‰æ‹©ç®—æ³• â†’ ç‚¹å‡»â€œæ‰§è¡Œæ‹¼æ¥ä¸è¡¥å…¨â€

3. é¡µé¢å±•ç¤ºï¼š

   - å›¾åƒé¢„è§ˆï¼ˆä¸Šä¼ ï¼‰
   - æ‹¼æ¥å›¾åƒï¼ˆStitchedï¼‰
   - ä¿®å¤å›¾åƒï¼ˆInpaintedï¼‰
   - ä¸‹è½½æŒ‰é’®

---

## ç¤ºä¾‹è¿è¡Œï¼ˆå‘½ä»¤è¡Œç¦»çº¿æ¨¡å¼ï¼‰

å¯è¿è¡Œ `main.py`ï¼Œè‡ªåŠ¨è¯»å– `Image/im0.png` ä¸ `Image/im1.png` è¿›è¡Œæ‹¼æ¥å¹¶å¼¹å‡ºç»“æœçª—å£ï¼š

```bash
python main.py
```

---

## ç¯å¢ƒä¾èµ–

- Python 3.8+
- OpenCV-Python
- NumPy
- Pillow
- Streamlit >= 1.25

å®‰è£…ä¾èµ–å»ºè®®ï¼š

```bash
pip install opencv-python numpy pillow streamlit
```

---
## ğŸ‘¤ ä½œè€…ä¿¡æ¯

- ğŸ§‘â€ğŸ’» ä½œè€…ï¼šRanjun Mo  
- ğŸ“… æ—¶é—´ï¼š2025å¹´5æœˆ  
- ğŸ”’ ç‰ˆæƒæ‰€æœ‰ Â© 2025 Ranjun Mo, Inc.
